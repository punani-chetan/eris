<div class="row">
  <div class="col-md-12">
    <!-- border-bottom: 2px solid rgba(0,0,0,.15); -->
    <!-- <span>
      <h3>List Device</h3>
    </span> -->
    <div class="alert alert-secondary" role="alert">
      <h5>List Device</h5>
    </div>
  </div>
</div>
<div class="row mt-3">
  <div class="col-12 col-xl-12">
    <div class="row mb-3">
      <div [ngClass]="{ 'col-4': !mobileView, 'col-12': mobileView }">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            #search
            (keyup)="applyFilter($event)"
            placeholder="Search Here"
          />
        </div>
      </div>
      <div [ngClass]="{ 'col-4': !mobileView, 'col-12 mt-2': mobileView }">
        <select
          class="form-select"
          aria-label="Default select example"
          id="deviceType1"
          [(ngModel)]="deviceType"
          (change)="selectedDeviceType($event)"
        >
          <!-- <option value="" selected>Flow Meter</option> -->
          <option
            *ngFor="let name of deviceTypeList; let i = index"
            [value]="name.value"
            [selected]="name"
          >
            {{ name.key }}
          </option>
        </select>
      </div>
      <div
        [ngClass]="{
          'col-4': !mobileView,
          'col-12 mt-2 justify-content-center': mobileView
        }"
      >
        <button class="btn btn-primary float-end" (click)="addDevice()">
          <span class="me-2"><i class="bi bi-plus-square"></i></span>Add Device
        </button>
      </div>
    </div>
    <div class="table-responsive">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
        class="table-bordered device-table"
      >
        <ng-container matColumnDef="name">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            style="background-color: #eaeaea"
            class="text-dark bg-stripe margin-left-26"
            sortActionDescription="Sort by name"
          >
            Name
          </th>
          <td
            mat-cell
            class="text-truncate text-center"
            *matCellDef="let row"
            style="max-width: 250px; cursor: pointer"
          >
            {{ row.name }}
          </td>
        </ng-container>

        <ng-container matColumnDef="mac">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            sortActionDescription="Sort by mac"
            style="background-color: #eaeaea"
          >
            MAC
          </th>
          <td
            mat-cell
            class="text-truncate text-center"
            *matCellDef="let row"
            style="max-width: 250px; cursor: pointer"
          >
            {{ row.mac }}
          </td>
        </ng-container>
        <ng-container matColumnDef="type">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            sortActionDescription="Sort by type"
            style="background-color: #eaeaea"
          >
            Type
          </th>
          <td
            mat-cell
            class="text-truncate text-center"
            *matCellDef="let row"
            style="max-width: 250px; cursor: pointer"
          >
            {{ row.type }}
          </td>
        </ng-container>
        <ng-container matColumnDef="pi">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            sortActionDescription="Sort by rate"
            style="background-color: #eaeaea"
          >
            Payload Interval
          </th>
          <td
            mat-cell
            class="text-truncate text-center"
            *matCellDef="let row"
            style="max-width: 250px; cursor: pointer"
          >
            {{ row.pi }}
          </td>
        </ng-container>
        <ng-container matColumnDef="action">
          <th
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
            class="header-container"
            sortActionDescription="Sort by action"
            style="background-color: #eaeaea"
          >
            Action
          </th>
          <td
            mat-cell
            class="text-truncate text-center"
            *matCellDef="let row"
            style="max-width: 250px; cursor: pointer"
          >
            <button
              (click)="updateDevice(row)"
              style="margin-left: 15px"
              class="btn btn-primary mr-2"
            >
              <i class="bi bi-pencil-square"></i>
            </button>
            <!-- [title]="row['isEditable'] === false ? 'Not Editable Controller Is Offline':'Edit Device'" -->
            <!-- <button
              (click)="scheduleDevice(row)"
              class="btn mr-2"
              [ngClass]="{
                'btn-danger': row['isEditable'] === false,
                'btn-success': row['isEditable'] === true
              }"
            >
              <i class="bi bi-calendar-check-fill"></i>
            </button> -->
            <button
              (click)="factoryResetDevice(row)"
              class="btn mr-2"
              [ngClass]="{
                'btn-secondary':
                  row['pstate'] !== 'online' || row['vstate'] !== 'online',
                'btn-warning':
                  row['pstate'] == 'online' || row['vstate'] == 'online'
              }"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-recycle"
                viewBox="0 0 16 16"
              >
                <path
                  d="M9.302 1.256a1.5 1.5 0 0 0-2.604 0l-1.704 2.98a.5.5 0 0 0 .869.497l1.703-2.981a.5.5 0 0 1 .868 0l2.54 4.444-1.256-.337a.5.5 0 1 0-.26.966l2.415.647a.5.5 0 0 0 .613-.353l.647-2.415a.5.5 0 1 0-.966-.259l-.333 1.242-2.532-4.431zM2.973 7.773l-1.255.337a.5.5 0 1 1-.26-.966l2.416-.647a.5.5 0 0 1 .612.353l.647 2.415a.5.5 0 0 1-.966.259l-.333-1.242-2.545 4.454a.5.5 0 0 0 .434.748H5a.5.5 0 0 1 0 1H1.723A1.5 1.5 0 0 1 .421 12.24l2.552-4.467zm10.89 1.463a.5.5 0 1 0-.868.496l1.716 3.004a.5.5 0 0 1-.434.748h-5.57l.647-.646a.5.5 0 1 0-.708-.707l-1.5 1.5a.498.498 0 0 0 0 .707l1.5 1.5a.5.5 0 1 0 .708-.707l-.647-.647h5.57a1.5 1.5 0 0 0 1.302-2.244l-1.716-3.004z"
                />
              </svg>
            </button>
            <button (click)="deleteDevice(row)" class="btn btn-danger">
              <i class="bi bi-trash-fill"></i>
            </button>
          </td>

          <!-- [title]="row['isEditable'] === false ? 'Non deletable Controller Is Offline':'Delete Device'" -->
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row">
          <td class="mat-cell text-center" colspan="22">No Data Available</td>
        </tr>
      </table>
    </div>
    <div>
      <mat-paginator
        class="mat-paginator-sticky"
        #MatPaginator
        [pageSizeOptions]="[10, 25, 100]"
        aria-label="Select page of users"
      ></mat-paginator>
    </div>
  </div>
</div>
<!-- <div style="height: 56px"></div> -->

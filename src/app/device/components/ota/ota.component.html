<div class="container">
  <div class="row">
    <div class="col-md-12">
      <div class="alert alert-secondary" role="alert">
        <h5>OTA</h5>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-end align-items-center">
        <mat-form-field style="margin-right: 1rem">
          <mat-select
            placeholder="Select File to Delete"
            [(ngModel)]="deleteFile"
            (ngModelChange)="deleteFiles()"
          >
            <mat-option *ngFor="let file of fileList" [value]="file">
              <p>
                {{ file }}
                <span style="float: right">x</span>
              </p>
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button class="btn btn-primary" (click)="upload()">
          <span class="me-2"><i class="bi bi-plus-square"></i></span>Upload
        </button>
      </div>
    </div>
  </div>

  <div>
    <form [formGroup]="otaForm">
      <div class="form-group">
        <fieldset class="form-group mt-3">
          <div class="row">
            <legend class="col-form-label col-sm-2 pt-0">Select Type</legend>
            <div class="col-sm-10">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  formControlName="type"
                  name="type"
                  id="flowMeter"
                  value="flowMeter"
                  style="margin-right: 2px"
                />
                <label class="form-label" for="flowMeter">Flow Meter</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  formControlName="type"
                  name="type"
                  id="energyMeter "
                  value="energyMeter"
                  style="margin-right: 2px"
                />
                <label class="form-label" for="valve">Energy Meter</label>
              </div>
              <p class="" *ngIf="!isPump && !isValve && isDevice">
                You can not take any action pump and valve are offline.
              </p>
              <p class="" *ngIf="!isPump && !isValve && !isDevice"></p>
              <!-- <div *ngIf="formSubmitted && f.type.errors" class="error text-danger mb-2">
                          <div>Type is required</div>
                      </div> -->
            </div>
          </div>
        </fieldset>
        <div class="form-group row">
          <label for="inputEmail3" class="col-sm-2 col-form-label"
            >Select Device</label
          >
          <div class="col-sm-6">
            <select
              class="form-select"
              style="cursor: pointer"
              formControlName="device"
              aria-label="Default select example"
              (change)="getDeviceById()"
            >
              <option *ngFor="let item of deviceList" [value]="item._id">
                {{ item.name }}
              </option>
            </select>
            <!-- <div *ngIf="formSubmitted && f.device.errors" class="error mt-2 text-danger">
                      <div *ngIf="formSubmitted && f.device.errors.required">Device is required</div>
                  </div> -->
          </div>
        </div>
        <div class="form-group mt-3 row">
          <label for="inputEmail3" class="col-sm-2 col-form-label">URL</label>
          <div class="col-sm-6">
            <select
              class="form-select"
              style="cursor: pointer"
              formControlName="url"
              aria-label="Default select example"
            >
              <option *ngFor="let item of urlList" [value]="item">
                {{ item }}
              </option>
            </select>
            <!-- <div *ngIf="formSubmitted && f.url.errors" class="error mt-2 text-danger">
                      <div *ngIf="formSubmitted && f.url.errors.required">URL is required</div>
                  </div> -->
          </div>
        </div>

        <div class="row mt-3">
          <div
            class="search-button"
            [ngClass]="{ 'col-8': !mobileView, 'col-12': mobileView }"
          >
            <button
              type="submit"
              class="btn btn-dark m-2 float-right"
              (click)="cancel()"
              [title]="
                userRole === 'Admin'
                  ? 'Cancel Form'
                  : 'This will Cancel the Form'
              "
            >
              Cancel
            </button>
            <button
              type="submit"
              class="btn btn-success m-2 float-right"
              (click)="otaForm.reset()"
              [title]="
                userRole === 'Admin' ? 'Reset Form' : 'This will Reset the Form'
              "
            >
              Reset
            </button>
            <button
              type="submit"
              class="btn btn-primary m-2 float-right"
              (click)="submitOTAForm()"
              [title]="
                userRole === 'Admin'
                  ? 'Submit Form'
                  : 'This will Submit the Form'
              "
            >
              Submit
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
